<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego del Ahorcado</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Nunito:wght@400;600;700&display=swap');
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden; /* ¬°Clave! Proh√≠be las barras de scroll en toda la p√°gina */
      font-family: 'Nunito', sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      justify-content: center; /* Centra el wrapper horizontalmente */
      align-items: center;    /* Centra el wrapper verticalmente */
      padding: 1vh 1vw; /* Usa padding relativo a la pantalla */
      position: relative;
    }

    /* --- ESTILOS DECORATIVOS (SIN CAMBIOS IMPORTANTES) --- */
    body::before {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: float 20s infinite linear;
      z-index: -1;
    }
    @keyframes float {
      0% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(-50px, -50px) rotate(360deg); }
    }
    .cloud {
      position: absolute; background: rgba(255, 255, 255, 0.8); border-radius: 50px; opacity: 0.7; animation: drift 15s infinite linear;
    }
    .cloud::before, .cloud::after {
      content: ''; position: absolute; background: rgba(255, 255, 255, 0.8); border-radius: 50px;
    }
    .cloud1 { width: 60px; height: 20px; top: 10%; left: -60px; animation-duration: 20s; }
    .cloud1::before { width: 30px; height: 30px; top: -15px; left: 10px; }
    .cloud1::after { width: 40px; height: 25px; top: -10px; right: 10px; }
    .cloud2 { width: 80px; height: 25px; top: 50%; left: -80px; animation-duration: 25s; animation-delay: -10s; }
    .cloud2::before { width: 40px; height: 40px; top: -20px; left: 15px; }
    .cloud2::after { width: 50px; height: 30px; top: -15px; right: 15px; }
    @keyframes drift {
      0% { transform: translateX(-100px); }
      100% { transform: translateX(calc(100vw + 100px)); }
    }
    /* --- FIN DE ESTILOS DECORATIVOS --- */
    
    h1 {
      font-family: 'Fredoka One', cursive;
      /* ¬°Clave! Fuente que se adapta al alto de la pantalla, con un m√≠nimo y m√°ximo */
      font-size: clamp(1.5rem, 5vh, 2.5rem); 
      color: #fff;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      text-align: center;
      animation: bounce 2s ease-in-out infinite alternate;
      flex-shrink: 0; /* No encoger el t√≠tulo */
      margin-bottom: 1.5vh;
    }
    
    @keyframes bounce {
      0% { transform: translateY(0px); }
      100% { transform: translateY(-5px); }
    }
    
    .game-wrapper {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      max-width: 900px;
    }
    
    .inputs {
      background: rgba(255, 255, 255, 0.95);
      padding: clamp(10px, 2vh, 20px);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      gap: 1.5vh;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.3);
      flex-shrink: 0; /* No encoger este panel */
      margin-bottom: 1.5vh;
    }
    
    .inputs label {
      font-weight: 600;
      color: #4a5568;
      font-size: clamp(0.8rem, 2.5vmin, 1rem);
    }
    
    input[type=password], input[type=text] {
      padding: 1.5vh 12px;
      font-size: clamp(12px, 2.5vmin, 14px);
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      transition: all 0.3s ease;
      font-family: 'Nunito', sans-serif;
      width: 100%;
    }
    
    input[type=password]:focus, input[type=text]:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }
    
    .container {
      /* ¬°Clave! Este contenedor ocupar√° todo el espacio vertical sobrante */
      flex: 1; 
      display: flex;
      flex-direction: column; /* Dise√±o m√≥vil primero (vertical) */
      gap: 2vh;
      background: rgba(255, 255, 255, 0.95);
      padding: clamp(10px, 2vmin, 20px);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.3);
      overflow: hidden; /* ¬°Clave! Evita que el contenido interno se desborde */
    }
    
    .dibujo {
      background: linear-gradient(145deg, #f7fafc, #edf2f7);
      border-radius: 15px;
      padding: 10px;
      box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      /* ¬°Clave! Proporci√≥n flexible. Ocupar√° 1 parte del espacio disponible */
      flex: 1.2;
      overflow: hidden;
    }

    .dibujo svg {
      width: 100%;
      height: 100%;
      object-fit: contain; /* ¬°Clave! El SVG se ajusta sin deformarse */
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
    }

    .dibujo svg path, .dibujo svg circle {
      visibility: hidden; stroke: #2d3748; stroke-width: 3; fill: none; stroke-linecap: round; stroke-linejoin: round; transition: all 0.5s ease;
    }
    .visible { visibility: visible !important; animation: drawLine 0.8s ease-out; }
    @keyframes drawLine { 0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; } 100% { stroke-dasharray: 100; stroke-dashoffset: 0; opacity: 1; } }
    #pared { visibility: visible; stroke: #8b5cf6; stroke-width: 4; }
    #parte3 { fill: #fef3c7; stroke: #2d3748; }
    
    .game-area {
      display: flex;
      flex-direction: column;
      gap: 1.5vh;
      /* ¬°Clave! Ocupar√° 2 partes del espacio, el doble que el dibujo */
      flex: 2;
      overflow: hidden; /* ¬°Clave! No permite scroll interno */
    }
    
    /* --- NUEVO ESTILO PARA NOTIFICACIONES --- */
    .notificacion {
        padding: clamp(8px, 1.5vh, 12px);
        border-radius: 10px;
        font-weight: 600;
        text-align: center;
        display: none; /* Empieza oculto */
        color: #991b1b;
        background-color: #fee2e2;
        border: 1px solid #fecaca;
        flex-shrink: 0;
    }

    .pista-container, .input-area, .descartadas, .resultado, .reinicio {
        flex-shrink: 0; /* ¬°Clave! Evita que estos elementos se encojan */
        padding: clamp(8px, 1.5vh, 15px);
        border-radius: 12px;
    }

    .pista-container { background: linear-gradient(135deg, #fef3c7, #fed7aa); border-left: 5px solid #f59e0b; }
    .pista-container strong, #mostrarPista { font-size: clamp(0.8rem, 2.5vmin, 1rem); color: #92400e; }
    
    .guiones {
      /* ¬°Clave! Este es el elemento que se estirar√° para ocupar el espacio central */
      flex: 1; 
      letter-spacing: 8px;
      display: flex;
      justify-content: center;
      align-items: center; /* Centra los guiones verticalmente */
      flex-wrap: wrap;
      gap: 6px;
      overflow: hidden; /* Asegura que no se desborde si la palabra es muy larga */
    }
    
    .guiones input {
      width: clamp(25px, 6vmin, 40px); /* Ancho adaptable */
      height: clamp(35px, 8vmin, 55px); /* Alto adaptable */
      font-size: clamp(1rem, 4vmin, 1.8rem); /* Fuente adaptable */
      text-align: center;
      border: none;
      border-bottom: 4px solid #667eea;
      background: transparent;
      color: #2d3748;
      font-weight: bold;
      font-family: 'Fredoka One', cursive;
      transition: all 0.3s ease;
    }
    
    .guiones input[value]:not([value=""]) {
      background: linear-gradient(135deg, #a7f3d0, #6ee7b7); border-radius: 8px; border-bottom: 4px solid #10b981; transform: scale(1.1); animation: letterReveal 0.6s ease-out;
    }
    @keyframes letterReveal { 0% { transform: scale(0) rotate(180deg); opacity: 0; } 50% { transform: scale(1.3) rotate(0deg); opacity: 0.7; } 100% { transform: scale(1.1) rotate(0deg); opacity: 1; } }
    
    .input-area { background: linear-gradient(135deg, #e0e7ff, #c7d2fe); border: 2px solid #a5b4fc; display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .input-area label { font-weight: 600; color: #3730a3; font-size: clamp(0.8rem, 2.5vmin, 1rem); }
    
    #letra {
      width: clamp(40px, 9vmin, 50px); height: clamp(40px, 9vmin, 50px);
      font-size: clamp(1rem, 4vmin, 1.5rem);
      text-align: center; border: 3px solid #667eea; border-radius: 10px; background: white; font-weight: bold; font-family: 'Fredoka One', cursive; color: #2d3748; transition: all 0.3s ease;
    }
    #letra:focus { outline: none; border-color: #4c51bf; box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2); transform: scale(1.1); }
    
    .descartadas { background: linear-gradient(135deg, #fee2e2, #fecaca); border-left: 5px solid #ef4444; }
    .descartadas { font-weight: 600; color: #991b1b; font-size: clamp(0.8rem, 2.5vmin, 1rem); }
    #descartadas { color: #7f1d1d; font-size: clamp(0.9rem, 3vmin, 1.1rem); font-weight: bold; letter-spacing: 2px; }
    
    .resultado {
      font-size: clamp(1rem, 3.5vmin, 1.5rem);
      font-weight: bold; text-align: center; border-radius: 12px; font-family: 'Fredoka One', cursive; text-shadow: 2px 2px 4px rgba(0,0,0,0.1); animation: resultAnimation 0.8s ease-out;
    }
    @keyframes resultAnimation { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(1.2); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }
    
    .reinicio { display: none; text-align: center; }
    
    button {
      padding: clamp(8px, 1.5vh, 12px) 20px;
      font-size: clamp(12px, 2.5vmin, 16px);
      font-weight: 600; border: none; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; font-family: 'Nunito', sans-serif; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); position: relative; overflow: hidden;
    }
    button::before { content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.6s ease; }
    button:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
    button:hover::before { left: 100%; }
    button:active { transform: translateY(-1px); }
    
    /* Responsive para pantallas anchas */
    @media (min-width: 768px) and (min-height: 500px) {
      .game-wrapper {
        max-height: 95vh; /* Limita la altura en pantallas muy altas */
      }
      .container {
        flex-direction: row; /* ¬°Clave! Cambia a dise√±o horizontal */
        gap: 20px;
      }
      .dibujo {
        flex: 1.5; /* M√°s espacio para el dibujo en horizontal */
      }
      .game-area {
        flex: 2; /* Menos espacio relativo en horizontal */
      }
    }
  </style>
</head>
<body>
  <div class="cloud cloud1"></div>
  <div class="cloud cloud2"></div>
  
  <div class="game-wrapper">
    <h1>üéØ Juego del Ahorcado üéØ</h1>

    <div class="inputs">
      <label>üî§ PALABRA: <input type="password" id="palabra" maxlength="20" onkeydown="manejarEnter(event, 'pista')"></label>
      <label>üí° PISTA: <input type="text" id="pista" onkeydown="manejarEnter(event, 'iniciar')"></label>
      <button onclick="iniciarJuego()">üöÄ Iniciar Juego</button>
    </div>

    <div class="container">
      <div class="dibujo">
        <svg viewBox="0 0 200 250">
          <path id="pared" d="M20 230 L20 20" />
          <path id="parte1" d="M20 20 L100 20" />
          <path id="parte2" d="M100 20 L100 50" />
          <circle id="parte3" cx="100" cy="70" r="20" />
          <path id="parte4" d="M100 90 L100 140" />
          <path id="parte5" d="M100 100 L70 120" />
          <path id="parte6" d="M100 100 L130 120" />
          <path id="parte7" d="M100 140 L70 180" />
          <path id="parte8" d="M100 140 L130 180" />
        </svg>
      </div>

      <div class="game-area">
        <div id="notificacion" class="notificacion"></div>

        <div class="pista-container">
          <strong>üí° PISTA:</strong> <span id="mostrarPista"></span>
        </div>
        
        <div class="guiones" id="guiones"></div>
        
        <div class="input-area">
          <label>‚úèÔ∏è Introduce letra:</label>
          <input type="text" id="letra" maxlength="1" onkeypress="if(event.key === 'Enter') adivinarLetra()">
          <button onclick="adivinarLetra()">üéØ Probar</button>
        </div>
        
        <div class="descartadas">
          <strong>‚ùå LETRAS DESCARTADAS:</strong> <span id="descartadas"></span>
        </div>
        
        <div class="resultado" id="resultado"></div>
        
        <div class="reinicio" id="botonReinicio">
          <button onclick="reiniciarJuego()">üîÑ JUGAR OTRA VEZ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let palabraOriginal = "";
    let palabraParaJuego = "";
    let letrasAdivinadas = [];
    let letrasDescartadas = [];
    let intentosFallidos = 0;
    let juegoTerminado = false;
    let timeoutNotificacion; // Variable para gestionar el temporizador de la notificaci√≥n

    // --- NUEVA FUNCI√ìN: Para gestionar la tecla "Intro" en los inputs iniciales ---
    function manejarEnter(event, siguienteElementoId) {
        if (event.key === 'Enter') {
            event.preventDefault(); // Evita que se env√≠e un formulario
            if (siguienteElementoId === 'iniciar') {
                iniciarJuego();
            } else {
                document.getElementById(siguienteElementoId).focus();
            }
        }
    }
    
    // --- NUEVA FUNCI√ìN: Para mostrar mensajes en la interfaz en lugar de alerts ---
    function mostrarNotificacion(mensaje) {
        const notificacion = document.getElementById("notificacion");
        notificacion.textContent = mensaje;
        notificacion.style.display = "block";

        clearTimeout(timeoutNotificacion); // Limpia cualquier mensaje anterior

        timeoutNotificacion = setTimeout(() => {
            notificacion.style.display = "none";
        }, 3000); // El mensaje desaparece despu√©s de 3 segundos
    }

    // Funciones de sonido (sin cambios)
¬† ¬† function reproducirSonidoAcierto() {
¬† ¬† ¬† const audioContext = new (window.AudioContext || window.webkitAudioContext)();
¬† ¬† ¬† const frecuencias = [523.25, 659.25];
¬† ¬† ¬† frecuencias.forEach((freq, index) => {
¬† ¬† ¬† ¬† const oscilador = audioContext.createOscillator();
¬† ¬† ¬† ¬† const ganancia = audioContext.createGain();
¬† ¬† ¬† ¬† oscilador.connect(ganancia);
¬† ¬† ¬† ¬† ganancia.connect(audioContext.destination);
¬† ¬† ¬† ¬† oscilador.type = 'sine';
¬† ¬† ¬† ¬† oscilador.frequency.setValueAtTime(freq, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.setValueAtTime(0, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01 + index * 0.1);
¬† ¬† ¬† ¬† ganancia.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2 + index * 0.1);
¬† ¬† ¬† ¬† oscilador.start(audioContext.currentTime + index * 0.1);
¬† ¬† ¬† ¬† oscilador.stop(audioContext.currentTime + 0.2 + index * 0.1);
¬† ¬† ¬† });
¬† ¬† }
¬† ¬† function reproducirSonidoError() {
¬† ¬† ¬† const audioContext = new (window.AudioContext || window.webkitAudioContext)();
¬† ¬† ¬† const oscilador = audioContext.createOscillator();
¬† ¬† ¬† const ganancia = audioContext.createGain();
¬† ¬† ¬† oscilador.connect(ganancia);
¬† ¬† ¬† ganancia.connect(audioContext.destination);
¬† ¬† ¬† oscilador.type = 'sawtooth';
¬† ¬† ¬† oscilador.frequency.setValueAtTime(300, audioContext.currentTime);
¬† ¬† ¬† oscilador.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 0.3);
¬† ¬† ¬† ganancia.gain.setValueAtTime(0, audioContext.currentTime);
¬† ¬† ¬† ganancia.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + 0.01);
¬† ¬† ¬† ganancia.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
¬† ¬† ¬† oscilador.start(audioContext.currentTime);
¬† ¬† ¬† oscilador.stop(audioContext.currentTime + 0.3);
¬† ¬† }
¬† ¬† function reproducirSonidoVictoria() {
¬† ¬† ¬† const audioContext = new (window.AudioContext || window.webkitAudioContext)();
¬† ¬† ¬† const melodia = [523.25, 587.33, 659.25, 783.99];
¬† ¬† ¬† melodia.forEach((freq, index) => {
¬† ¬† ¬† ¬† const oscilador = audioContext.createOscillator();
¬† ¬† ¬† ¬† const ganancia = audioContext.createGain();
¬† ¬† ¬† ¬† oscilador.connect(ganancia);
¬† ¬† ¬† ¬† ganancia.connect(audioContext.destination);
¬† ¬† ¬† ¬† oscilador.type = 'sine';
¬† ¬† ¬† ¬† oscilador.frequency.setValueAtTime(freq, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.setValueAtTime(0, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + 0.01 + index * 0.15);
¬† ¬† ¬† ¬† ganancia.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3 + index * 0.15);
¬† ¬† ¬† ¬† oscilador.start(audioContext.currentTime + index * 0.15);
¬† ¬† ¬† ¬† oscilador.stop(audioContext.currentTime + 0.3 + index * 0.15);
¬† ¬† ¬† });
¬† ¬† }
¬† ¬† function reproducirSonidoDerrota() {
¬† ¬† ¬† const audioContext = new (window.AudioContext || window.webkitAudioContext)();
¬† ¬† ¬† const acordeDerrota = [261.63, 207.65, 155.56];
¬† ¬† ¬† acordeDerrota.forEach((freq, index) => {
¬† ¬† ¬† ¬† const oscilador = audioContext.createOscillator();
¬† ¬† ¬† ¬† const ganancia = audioContext.createGain();
¬† ¬† ¬† ¬† oscilador.connect(ganancia);
¬† ¬† ¬† ¬† ganancia.connect(audioContext.destination);
¬† ¬† ¬† ¬† oscilador.type = 'triangle';
¬† ¬† ¬† ¬† oscilador.frequency.setValueAtTime(freq, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.setValueAtTime(0, audioContext.currentTime);
¬† ¬† ¬† ¬† ganancia.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
¬† ¬† ¬† ¬† ganancia.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1.0);
¬† ¬† ¬† ¬† oscilador.start(audioContext.currentTime);
¬† ¬† ¬† ¬† oscilador.stop(audioContext.currentTime + 1.0);
¬† ¬† ¬† });
¬† ¬† }

    function quitarTildes(texto) {
        const acentos = {
            '√Å': 'A', '√â': 'E', '√ç': 'I', '√ì': 'O', '√ö': 'U', '√Ä': 'A', '√à': 'E', '√å': 'I', '√í': 'O', '√ô': 'U', '√Ñ': 'A', '√ã': 'E', '√è': 'I', '√ñ': 'O', '√ú': 'U', '√Ç': 'A', '√ä': 'E', '√é': 'I', '√î': 'O', '√õ': 'U'
        };
        return texto.split('').map(letra => acentos[letra] || letra).join('');
    }

    function iniciarJuego() {
        palabraOriginal = document.getElementById("palabra").value.toUpperCase().trim();
        // --- MEJORA: Usa la nueva funci√≥n de notificaci√≥n en lugar de alert ---
        if (!palabraOriginal) {
            mostrarNotificacion("Por favor, introduce una palabra para empezar.");
            return;
        }
        
        palabraParaJuego = quitarTildes(palabraOriginal);
        const pista = document.getElementById("pista").value;
        
        document.getElementById("mostrarPista").textContent = pista;
        letrasAdivinadas = Array(palabraParaJuego.length).fill(false);
        letrasDescartadas = [];
        intentosFallidos = 0;
        juegoTerminado = false;
        
        document.getElementById("descartadas").textContent = "";
        document.getElementById("resultado").textContent = "";
        document.getElementById("botonReinicio").style.display = "none";
        
        actualizarGuiones();
        ocultarMu√±eco();
        
        // --- MEJORA: Pone el foco en el input de la letra al iniciar ---
        document.getElementById('letra').focus();
    }

    function reiniciarJuego() {
        document.getElementById("palabra").value = "";
        document.getElementById("pista").value = "";
        document.getElementById("mostrarPista").textContent = "";
        document.getElementById("letra").value = "";
        document.getElementById("guiones").innerHTML = "";
        document.getElementById("resultado").textContent = "";
        document.getElementById("descartadas").textContent = "";
        document.getElementById("botonReinicio").style.display = "none";
        ocultarMu√±eco();
        // Al reiniciar, devolvemos el foco al primer campo
        document.getElementById('palabra').focus();
    }

    function actualizarGuiones() {
        const guiones = [];
        for (let i = 0; i < palabraParaJuego.length; i++) {
            if (letrasAdivinadas[i]) {
                guiones.push(`<input maxlength="1" value="${palabraOriginal[i]}" disabled>`);
            } else {
                guiones.push(`<input maxlength="1" value="" disabled>`);
            }
        }
        document.getElementById("guiones").innerHTML = guiones.join(" ");
    }

    function adivinarLetra() {
        if (juegoTerminado) return;

        const input = document.getElementById("letra");
        let letra = input.value.toUpperCase().trim();
        input.value = "";
        
        // --- MEJORA: Usa la nueva funci√≥n de notificaci√≥n ---
        if (!letra || !letra.match(/^[A-Z√ë]$/)) {
            mostrarNotificacion("Por favor, introduce una letra v√°lida (A-Z, √ë).");
            return;
        }
        
        let letraParaComparar = quitarTildes(letra);
        
        let yaUsada = false;
        for (let i = 0; i < palabraParaJuego.length; i++) {
            if (letrasAdivinadas[i] && palabraParaJuego[i] === letraParaComparar) {
                yaUsada = true;
                break;
            }
        }
        
        // --- MEJORA: Usa la nueva funci√≥n de notificaci√≥n ---
        if (yaUsada || letrasDescartadas.includes(letra)) {
            mostrarNotificacion("Ya has probado esa letra. ¬°Intenta con otra!");
            return;
        }

        let acierto = false;
        for (let i = 0; i < palabraParaJuego.length; i++) {
            if (palabraParaJuego[i] === letraParaComparar) {
                letrasAdivinadas[i] = true;
                acierto = true;
            }
        }

        if (acierto) {
            reproducirSonidoAcierto();
        } else {
            letrasDescartadas.push(letra);
            document.getElementById("descartadas").textContent = letrasDescartadas.join(" ");
            mostrarParteMu√±eco(++intentosFallidos);
            reproducirSonidoError();
        }

        actualizarGuiones();
        verificarFin();
    }

    function mostrarParteMu√±eco(n) {
        const parte = document.getElementById(`parte${n}`);
        if (parte) parte.classList.add("visible");
    }

    function ocultarMu√±eco() {
        for (let i = 1; i <= 8; i++) {
            const parte = document.getElementById(`parte${i}`);
            if (parte) parte.classList.remove("visible");
        }
    }

    function verificarFin() {
        let todasAdivinadas = !letrasAdivinadas.includes(false);
        
        if (todasAdivinadas) {
            document.getElementById("resultado").textContent = "üéâ ¬°HAS GANADO! üéâ";
            document.getElementById("resultado").style.background = "linear-gradient(135deg, #a7f3d0, #6ee7b7)";
            document.getElementById("resultado").style.color = "#065f46";
            juegoTerminado = true;
            document.getElementById("botonReinicio").style.display = "block";
            reproducirSonidoVictoria();
        } else if (intentosFallidos >= 8) {
            document.getElementById("resultado").textContent = `üíÄ HAS PERDIDO üíÄ La palabra era: ${palabraOriginal}`;
            document.getElementById("resultado").style.background = "linear-gradient(135deg, #fecaca, #f87171)";
            document.getElementById("resultado").style.color = "#7f1d1d";
            juegoTerminado = true;
            document.getElementById("botonReinicio").style.display = "block";
            reproducirSonidoDerrota();
        }
    }
    
    // Al cargar la p√°gina, ponemos el foco en el primer campo
    document.getElementById('palabra').focus();
  </script>
</body>
</html>
